@using BlockBase.Dapps.NeverForget.WebApp.Models
@model TwitterDetailsViewModel

<div class="container twitterDetailsContext">
    <div class="row rowDetails">
        <div class="col-md content">
            <div class="card-body borderTwitter">
                @if (Model.Submission != null)
                {
                    var dateToString = Model.Submission.Date.ToString("yyyy/MM/dd");
                    <div class="container auditInfo d-flex">
                        <a class="col- pr-1" target="_blank" href="https://www.twitter.com/@Model.Submission.Author">
                            u/@Html.DisplayFor(item => Model.Submission.Author)
                        </a>
                        <span>•</span>
                        <a class="col-">
                            @Html.DisplayFor(item => dateToString)
                        </a>
                        <div class="col- d-flex ml-auto">
                            @if (Model.Submission.MediaLink != null)
                            {
                                <a target="_blank" href="@Model.Submission.MediaLink" data-toggle="tooltip" data-placement="top" title="Show media"><i class="far fa-photo-video"></i></a>
                            }
                            <a target="_blank" href="@Model.Submission.Link" data-toggle="tooltip" data-placement="top" title="Redirect to Twitter">
                                <img style="max-width: 30px" src="~/img/Twitter_logo.png" />
                            </a>
                        </div>
                    </div>

                    <div class="container ">
                        <div class="card-text d-block text-left contentInfo">@Html.DisplayFor(item => Model.Submission.Content)</div>
                    </div>
                }
                else
                {
                    var dateToString = Model.Comments[0].Date.ToString("yyyy/MM/dd");
                    <div class="container auditInfo d-flex">
                        <a class="col- pr-1" target="_blank" href="https://www.twitter.com/@Model.Comments[0].Author/">
                            u/@Html.DisplayFor(item => Model.Comments[0].Author)
                        </a>
                        <span>•</span>
                        <a class="col-">
                            @Html.DisplayFor(item => dateToString)
                        </a>
                        <div class="col- d-flex ml-auto">
                            @if (Model.Comments[0].MediaLink != null)
                            {
                                <a target="_blank" href="@Model.Comments[0].MediaLink" data-toggle="tooltip" data-placement="top" title="Show media"><i class="far fa-photo-video"></i></a>
                            }
                            <a target="_blank" href="@Model.Comments[0].Link" data-toggle="tooltip" data-placement="top" title="Redirect to Twitter">
                                <img style="max-width: 30px" src="~/img/Twitter_logo.png" />
                            </a>
                        </div>
                    </div>

                    <div class="container ">
                        <div class="card-text d-block text-left contentInfo">@Html.DisplayFor(item => Model.Comments[0].Content)</div>
                    </div>
                    Model.Comments.RemoveAt(0);
                }

                <br>

                @foreach (var item in Model.Comments)
                {
                    var dateToString = item.Date.ToString("yyyy/MM/dd");
                    <div class="pt-2 d-flex flex-row justify-content-center">
                        <div class="card-body borderTwitter cardDetails auditInfoSmall">
                            <div class="container auditInfoSmall d-flex">
                                <a class="col- pr-1" target="_blank" href="https://www.twitter.com/@item.Author/">
                                    u/@Html.DisplayFor(modelItem => item.Author)
                                </a>
                                <span>•</span>
                                <a class="col-">
                                    @Html.DisplayFor(item => dateToString)
                                </a>
                            </div>

                            <div class="container ">
                                <div class="card-text d-block text-left contentInfoSmall">@Html.DisplayFor(item => Model.Comments[0].Content)</div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>